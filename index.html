<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.4.1/q.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/spark-md5/2.0.2/spark-md5.min.js"></script>
		<title>Autenticador de documentos online</title>
	</head>

	<body>
		<div class="container">
			<div class="row" style="margin-top: 1em">
				<div class="col-lg-10 offset-1">
					<h1 class="text-center">Registry IMD0293</h1>
				</div>
			</div>

			<div class="row" style="margin-top: 1em">
				<div class="col-lg-10 offset-1">
					<h6 class="text-center">
						Usando conta: <span id="account"></span> |
						<a href="https://ropsten.etherscan.io/address/0x58db987051e91ae9a027ad60d3bc695449b4b095" target="_blank">
							Contract
						</a>
					</h6>
				</div>
			</div>

			<div class="row" style="margin-top: 1em">
				<div class="col-lg-10 offset-1">
					<div class="card">
						<div class="card-header">Autenticar documento</div>
						<div class="card-body">
							<h5 class="card-title">Escolha um arquivo e envie ele para realizar a sua autenticação</h5>
							<div class="row">
								<div class="col-lg-12">
									<br />
									<form>
										<div class="form-group">
											<label for="exampleFormControlFile1"></label>
											<input type="file" class="form-control-file" id="file" />
										</div>
									</form>
									<br />
								</div>
							</div>
							<hr />
							<div class="row">
								<div class="d-grid gap-2 col-6 mx-auto">
									<button class="btn btn-primary" onclick="sendDocument('file');" value="Calculate">
										Enviar arquivo
									</button>
								</div>
							</div>
							<br />
							<br />
							<div class="row">
								<div class="d-grid gap-7 col-1 mx-auto">
									<img id="hashLoading" src="https://c.tenor.com/VCHTlBFfQVoAAAAM/loading.gif" width="30" height="30" />
								</div>
							</div>
							<div class="row">
								<div class="alert alert-success alert-dismissible fade show" role="alert" id="autenticarSuccess">
									<strong>Documento autenticado com sucesso!</strong>
									<br />
									<br />
									Hash unica gerada para o documento: <strong><span id="hashDocument"></span></strong>
									<button type="button" class="btn-close" onclick="hideAutenticarSuccess();"></button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row" style="margin-top: 1em">
				<div class="col-lg-10 offset-1">
					<div class="card">
						<div class="card-header">Verificar documento</div>
						<div class="card-body">
							<h5 class="card-title">Envie seu documento para verificar sua autenticidade</h5>
							<div class="row">
								<div class="col-lg-12">
									<br />
									<form>
										<div class="form-group">
											<label for="exampleFormControlFile1"></label>
											<input type="file" class="form-control-file" id="verifyFile" />
										</div>
									</form>
									<br />
								</div>
							</div>
							<hr />
							<div class="row">
								<div class="d-grid gap-2 col-6 mx-auto">
									<button class="btn btn-primary" onclick="verifyDocument('verifyFile')" value="Calculate">
										Verificar arquivo
									</button>
								</div>
							</div>
							<br />
							<br />
							<div class="row">
								<div class="alert alert-success alert-dismissible fade show" role="alert" id="verifySuccess">
									<strong>O documento foi autenticado, informações:</strong>
									<div id="result"></div>
									<button type="button" class="btn-close" onclick="hideVerifySuccess();"></button>
								</div>
							</div>
							<div class="row">
								<div class="alert alert-danger alert-dismissible fade show" role="alert" id="verifyError">
									<strong>Nenhuma autenticação foi feita para o documento</strong>
									<button type="button" class="btn-close" onclick="hideVerifyError();"></button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row" style="margin-top: 4em">
				<div class="col-lg-10 offset-1">
					<table class="table">
						<thead style="text-align: center;">
							<tr>
								<th scope="col">#</th>
								<th scope="col">Nome</th>
								<th scope="col">Autenticador</th>
								<th scope="col">Criado em</th>
							</tr>
						</thead>
						<tbody id="table-body" style="text-align: center;">
						</tbody>
					</table>
				</div>
			</div>
			<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
			<script
				src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
				integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
				crossorigin="anonymous"
			></script>
			<script src="./scripts/abi.js"></script>
			<script src="./scripts/md5.js"></script>
			<script src="./scripts/dapp.js"></script>
			<script src="./scripts/main.js"></script>
		</div>
	</body>
</html>
